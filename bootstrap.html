<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>LCARS</title>
    <link rel="stylesheet" href="res/css/bootstrap.min.css">
    <link rel="stylesheet" href="res/css/lcars-2.css">
</head>

<body>
    <div class="lcars-container">
        <div class="row row-cols-2 g-2" style="margin-left:0;margin-right:0;">
            <div class="col-2 lcars-sidebar">
                <div class="row-v fs-1">
                    <div class="col-v-3 p-0">
                        <img src="res/images/federation.png" class="img-fluid">
                    </div>
                    <button class="col-v-1 bg-primary lcars-button" onClick="load_to_main(3)">
                        HOME
                    </button>
                    <button class="col-v-1 bg-warning lcars-button">
                        BUTTON
                    </button>
                    <button class="col-v-1 bg-info lcars-button">
                        BUTTON
                    </button>
                    <button class="col-v-1 bg-primary lcars-button">
                        BUTTON
                    </button>
                    <button class="col-v-1 bg-primary lcars-button">
                        BUTTON
                    </button>
                    <button class="col-v-2 bg-success lcars-button" onClick="load_to_main(2)">
                        GRAPH
                    </button>
                    <button class="col-v-2 bg-primary lcars-button" onClick="load_to_main(1)">
                        ABOUT
                    </button>
                </div>

            </div>
            <div class="col-10 lcars-main">
                <div class="row-v h-100 lcars-text-bottom align-text-bottom ">
                    <div class="col-v-1 bg-black text-white d-flex flex-row-reverse align-items-center" style="font-size: 4rem;">
                        NX-1711 TRIANGULUM ● LCARS ACCESS 99-111171
                    </div>
                    <div class="col-v-2 bg-black">
                        <div class="row">
                            <div class="col-8">

                            </div>
                            <div class="col">
                                <div class="row row-cols-md-2 fs-1">
                                    <button class="col bg-primary lcars-button lcars-top-button">
                                        BUTTON
                                    </button>
                                    <button class="col bg-warning lcars-button lcars-top-button">
                                        BUTTON
                                    </button>
                                    <button class="col bg-danger lcars-button lcars-top-button">
                                        BUTTON
                                    </button>
                                    <button class="col bg-info lcars-button lcars-top-button">
                                        BUTTON
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-v-0-5 bg-primary d-flex align-items-end flex-column">
                        <span class="mt-auto">31-4434</span>
                    </div>
                    <div class="col-v-8-5 bg-black lcars-main-panel" id="lcars-main-panel">

                    </div>
                </div>
            </div>
        </div>
    </div>
</body>
<script src="res/js/bootstrap.min.js"></script>
<script src="res/js/jquery-3.6.0.min.js"></script>
<script>
    var audio_button_click = new Audio("res/audio/computerbeep_5.mp3");

    $(document).ready(function () {
        //$("#lcars-title").text("USS PUNIPUNI ● LCARS ACCESS " + Date.now());
        //$( "#lcars-main-panel" ).load( "https://raw.githubusercontent.com/AdmiralPuni/lcars-web/main/pages/about.html" );
        //$("#lcars-main-panel").html(create_table(databank));
        /*
        
        $(function () {
            random_temperature();
            function random_temperature() {
                setTimeout(random_temperature, 500);
                temperature.push(Math.floor(Math.random() * 50) + 20);
                $("#chart-temperature").html(svg_create_chart(temperature, 20));
                humidity.push(Math.floor(Math.random() * 100));
                $("#chart-humidity").html(svg_create_chart(humidity, 20));
            }
        });
        */
    });
    $(".lcars-button").click(function () {
        audio_button_click.play();
    });

    function load_to_main(index) {
        $("#lcars-main-panel").hide();
        $("#lcars-main-panel").fadeToggle(300);
        switch (index) {
            case 1:
                $("#lcars-main-panel").load("https://raw.githubusercontent.com/AdmiralPuni/lcars-web/main/pages/about.html");
                break;
            case 2:
                $("#lcars-main-panel").load("https://raw.githubusercontent.com/AdmiralPuni/lcars-web/main/pages/graph.html", function () {
                    $("#chart-temperature").html(svg_create_chart(temperature, 20));
                    $("#chart-humidity").html(svg_create_chart(humidity, 20));
                });

                break;
            case 3:
                $("#lcars-main-panel").load("https://raw.githubusercontent.com/AdmiralPuni/lcars-web/main/pages/home.html");
                break;
        }

    }

    var temperature = [30, 32, 27, 31, 33, 29, 40, 27, 21, 29, 31, 29, 30, 32, 27, 31, 33, 29, 40, 27, 21, 29, 31, 29, 40, 50];
    var humidity = [0, 10, 20, 30, 40, 50, 60, 70, 80, 90, 100];

    var personnel = [
        {
            "id": "32744",
            "name": "LT. CMDR. COMMODORE",
            "last_location": "PLANITIA SMTHNG",
            "scan": "92344"
        }
    ];
    var databank = [
        {
            "id": "2235",
            "name": "Alpha Quadrant",
            "description": "44574545"
        },
        {
            "id": "3343",
            "name": "Beta Quadrant",
            "description": "34782234"
        },
        {
            "id": "5545",
            "name": "Delta Quadrant",
            "description": "11245323"
        }
    ];

    function create_table(data) {
        var html = "<table class='lcars-table'>";
        $("#lcars-main-panel").html(``);

        $.each(data, function (i, item) {
            html += "<tr id='data-" + i + "'>";
            $.each(item, function (i, value) {
                html += "<td>";
                html += value;
                html += "</td>";
            });
            html += "</tr>";
        });
        html += "</table>";
        return html;
    }

    function svg_create_chart(data, spacing) {
        var x = 10;
        var points = "";
        var html = ``;
        for (let i = data.length - data.length; i < data.length; i++) {
            points += x + "," + (110 - data[i]) + " ";
            html += `<line x1="` + x + `" y1="115" x2="` + x + `" y2="` + (110 - data[i]) + `" style="stroke:#0074d9;stroke-width:1" />`;
            html += `<text x="` + (x - 5) + `" y="130" fill="#FFFFFF">` + data[i] + `</text>`;
            x += spacing;
        }
        $.each(data, function (i, value) {

        });
        html += `<polyline fill="none" stroke="#0074d9" stroke-width="2" id="chart-temperature-poly" points="` + points + `" />`
        return html;
    }
</script>

</html>